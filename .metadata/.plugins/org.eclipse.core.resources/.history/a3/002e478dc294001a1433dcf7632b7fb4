package com.sist.databoard;

import java.util.*;
import com.sist.dao.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("board/")
public class DataBoardController {
	
	@Autowired
	private DataBoardDAO dao;
	
	@RequestMapping("list.do")
	public String board_list(Model model, String page)
	{
		
		
		// 1. 매개변수 => 사용자의 요청값을 받는다. 
		if (page == null)
			page = "1";
		int curpage = Integer.parseInt(page);
		int rowSize = 10;
		int start = rowSize * (curpage - 1) + 1;
		int end = rowSize * curpage;

		// 2. 요청에 대한 처리
		Map map = new HashMap();
		map.put("start", start);
		map.put("end", end);
		List<BoardVO> list = dao.boardListData(map);
		int totalpage = dao.boardTotalPage();

		// 3. 처리된 결과값 전송
		model.addAttribute("list", list);
		model.addAttribute("curpage", curpage);
		model.addAttribute("totalpage", totalpage);
		
		
		return "board/list";
		/* 
		 * application-context.xml에서 아래와 같이 코딩했으므로 prefix, suffix가 붙어서 
		 * return "board/list";는   "/board/list.jsp";가 된다.
		 * <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
				p:prefix="/"
				p:suffix=".jsp"
			/>
		 */
	}
	
	
	
	
	
	
	
}
