package com.sist.databoard;

import com.sist.dao.*;

import java.util.StringTokenizer;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("board/")
public class DataBoardRestController {
	@Autowired
	private DataBoardDAO dao;
	
	// [글 수정] - AJAX 처리 
	@RequestMapping("update_ok.do")
	public String databoard_update_ok(DataBoardVO vo)
	{
		String result="";
		
		// 비밀번호 체크 
		String db_pwd=dao.databoardGetPassword(vo.getNo());
		if(db_pwd.equals(vo.getPwd()))
		{
			result="OK";
			dao.databoardUpdate(vo);
		}
		else
		{
			result="NOPWD";
		}
		return result;
	}
	
	// [글 삭제] - AJAX 처리  
	@RequestMapping("delete_ok.do")
	public String databoard_delete_ok(int no,String pwd)
	{
		String result="";
		DataBoardVO vo=dao.databoardFileInfoData(no);
		boolean bCheck=dao.databoardDelete(no, pwd);
		
		// 삭제 대상 게시글에 파일이 있는지 없는지 여부에 따라 다르게 처리
		if(bCheck==true) // 파일 있음 
		{
			// 1) 게시글 삭제 - bCheck==true면 DAO에서 삭제시킴 
			result="OK";
			try {
				if(vo.getFilecount()>0)
			} catch (Exception ex) {}
		}
		else
		{
			result="NOPWD";
		}
		
		return result;
	}
	
}










